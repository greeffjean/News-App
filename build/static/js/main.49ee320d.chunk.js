(this["webpackJsonpnews-app"]=this["webpackJsonpnews-app"]||[]).push([[0],{63:function(e,t,a){},69:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(6),c=a(0),r=a.n(c),s=a(9),i=a.n(s),l=(a(63),a(37)),o=(a.p,a(32)),u=a(29),d=a(113),h=a(107),j=a(11),p=Object(c.createContext)(null);function b(){return Object(c.useContext)(p)}var f="".concat({apiKey:"defde18384ea44d1b5cb7f73809c12d9"}.apiKey);function O(e,t){var a="http://newsapi.org/v2/everything?"+"q=".concat(e,"&")+"from=".concat(t,"&")+"sortBy=popularity&"+"apiKey=".concat(f);return new Promise((function(e){var t=new Request(a,{headers:{Authorization:"Bearer ".concat(f)}});fetch(t).then((function(t){console.log(t),e(t.json())})).catch((function(t){e(t),console.log(t)}))}))}var m=function(){var e=Object(j.f)(),t=b(),a=t.mainState,r=t.setMainState,s=Object(c.useState)({searchButton:!1,input:"",filterDate:""}),i=Object(l.a)(s,2),p=i[0],f=i[1];function m(e){var t=Object(u.a)(Object(u.a)({},p),{},Object(o.a)({},e.target.attributes.name.nodeValue,e.target.value));f({searchButton:!!e.target.value,input:t.input,filterDate:t.filterDate})}function v(){r({articles:null,loading:!0,error:null,userHasSearched:!0})}function x(t,a){v(),O(a||p.input,p.filterDate).then((function(t){console.log(t),e.push({pathname:"/".concat(a||p.input,"/").concat(p.filterDate),state:{params:{input:a||p.input,filterDate:p.filterDate}}}),r({articles:t.articles?t.articles:null,loading:!1,error:t.message?t.message:null,userHasSearched:!0})})).catch((function(e){console.log(e)})),f({searchButton:!1,input:"",filterDate:""})}return Object(c.useEffect)((function(){e.location.state?(v(),O(e.location.state.params.input,e.location.state.params.filterDate).then((function(e){r({articles:e.articles?e.articles:null,loading:!1,error:e.message?e.message:null,userHasSearched:a.userHasSearched})})).catch((function(e){console.log(e)})),f({searchButton:!1,input:"",filterDate:""})):e.push({pathname:"/"})}),[]),window.onpopstate=function(){"/"==e.location.pathname?r({articles:null,loading:!1,error:null,userHasSearched:!1}):(v(),O(e.location.state.params.input,e.location.state.params.filterDate).then((function(e){r({articles:e.articles?e.articles:null,loading:!1,error:e.message?e.message:null,userHasSearched:!0})})).catch((function(e){console.log(e)})),f({searchButton:!1,input:"",filterDate:""}))},Object(n.jsxs)("div",{className:"search-bar-wrapper",children:[Object(n.jsx)("div",{className:a.userHasSearched?"search-bar active":"search-bar",children:Object(n.jsxs)("div",{className:"content-wrapper",children:[Object(n.jsxs)("div",{className:"content-headings",children:[Object(n.jsx)("h1",{children:"Discover"}),Object(n.jsx)("h2",{children:"Headlines"})]}),Object(n.jsxs)("div",{className:"content-input",children:[Object(n.jsx)(d.a,{onChange:function(e){return m(e)},id:"standard-basic",name:"input",label:"Search Headlines",value:p.input}),p.searchButton&&Object(n.jsxs)("div",{className:"filter-search-wrapper",children:[Object(n.jsx)(d.a,{onChange:function(e){return m(e)},id:"date",name:"filterDate",label:"Date",type:"date",InputLabelProps:{shrink:!0}}),Object(n.jsx)(h.a,{variant:"contained",onClick:function(e){return x()},children:"Search"})]})]})]})}),!a.userHasSearched&&Object(n.jsxs)("div",{className:"home-options",children:[Object(n.jsx)(h.a,{onClick:function(e){return x(0,"covid")},className:"headlines",variant:"contained",children:"COVID Headlines"}),Object(n.jsx)(h.a,{onClick:function(e){return x(0,"FIFA")},className:"latest",variant:"contained",children:"FIFA Headlines"})]})]})},v=a(114),x=a(108),g=a(109),S=a(110),D=a(115),w=a(111),H=a(112),N=a(39);var y=function(){var e=b().mainState;return Object(n.jsxs)("section",{children:[e.loading&&Object(n.jsx)("div",{className:"circular-progress",children:Object(n.jsx)(x.a,{color:"secondary"})}),e.error&&Object(n.jsx)(v.a,{severity:"error",children:e.error}),e.articles&&Object(n.jsx)("div",{className:"articles-wrapper",children:e.articles.length&&e.articles.map((function(e){return Object(n.jsxs)(g.a,{children:[Object(n.jsx)(S.a,{avatar:Object(n.jsx)(D.a,{"aria-label":"initial",children:e.author?e.author.charAt(0):"N"}),title:e.title,subheader:e.publishedAt}),Object(n.jsx)(w.a,{image:e.urlToImage,title:"Paella dish"}),Object(n.jsxs)(H.a,{children:[Object(n.jsx)(N.a,{color:"pink",component:"h4",children:e.source.name}),Object(n.jsx)(N.a,{variant:"body2",color:"textSecondary",component:"p",children:e.description})]})]})}))})]})};var C=function(){return Object(n.jsx)(j.c,{children:Object(n.jsx)(j.a,{path:"/",render:function(e){return Object(n.jsx)(y,Object(u.a)({},e))}})})};a(69);var B=function(){var e=Object(j.f)(),t=Object(c.useState)({articles:null,loading:!1,error:null,userHasSearched:!!e.location.state}),a=Object(l.a)(t,2),r=a[0],s=a[1];return Object(n.jsx)(p.Provider,{value:{mainState:r,setMainState:s},children:Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(m,{}),Object(n.jsx)(C,{})]})})},F=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,117)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))},k=a(28);i.a.render(Object(n.jsx)(k.a,{children:Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(B,{})})}),document.getElementById("root")),a(70).config(),F()}},[[73,1,2]]]);
//# sourceMappingURL=main.49ee320d.chunk.js.map